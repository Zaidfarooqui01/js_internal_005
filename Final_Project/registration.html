<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
    <link rel="stylesheet" href="style.css">
</head>

<body id="registrationPage">

    <h2>Register</h2>

    <form id="registrationForm">
        <table>
            <tr>
                <td>Name:</td>
                <td>
                    <input type="text" id="newUsername">
                    <div class="error-msg" id="nameError"></div>
                </td>
            </tr>

            <tr>
                <td>Email:</td>
                <td>
                    <input type="text" id="email">
                    <div class="error-msg" id="emailError"></div>
                </td>
            </tr>

            <tr>
                <td>Gender:</td>
                <td>
                    <input type="radio" name="gender" value="Male"> Male
                    <input type="radio" name="gender" value="Female"> Female
                    <input type="radio" name="gender" value="Other"> Other
                    <div class="error-msg" id="genderError"></div>
                </td>
            </tr>

            <tr>
                <td>Course:</td>
                <td>
                    <select id="course">
                        <option value="">Select a course</option>
                        <option value="HTML">HTML</option>
                        <option value="CSS">CSS</option>
                        <option value="JavaScript">JavaScript</option>
                        <option value="Python">Python</option>
                    </select>
                    <div class="error-msg" id="courseError"></div>
                </td>
            </tr>

            <tr>
                <td>Terms & conditions:</td>
                <td>
                    <input type="checkbox" id="terms"> I agree to the terms & conditions
                    <div class="error-msg" id="termsError"></div>
                </td>
            </tr>

            <tr>
                <td colspan="2" class="center">
                    <button type="submit">Register</button>
                </td>
            </tr>
        </table>
    </form>

    <script>
        document.getElementById("registrationForm").addEventListener("submit", function (event) {
            event.preventDefault();

            document.querySelectorAll(".error-msg").forEach(e => e.innerHTML = "");

            const name = document.getElementById("newUsername").value.trim();
            const email = document.getElementById("email").value.trim();
            const gender = document.querySelector('input[name="gender"]:checked');
            const course = document.getElementById("course").value;
            const terms = document.getElementById("terms").checked;

            let valid = true;


            if (name === "") {
                document.getElementById("nameError").innerHTML = "Name should not be empty";
                valid = false;
            }

            if (!email.includes("@") || !email.includes(".")) {
                document.getElementById("emailError").innerHTML = "Email should be valid";
                valid = false;
            }

            if (!gender) {
                document.getElementById("genderError").innerHTML = "Gender must be selected";
                valid = false;
            }

            if (course === "") {
                document.getElementById("courseError").innerHTML = "Course must be selected";
                valid = false;
            }

            if (!terms) {
                document.getElementById("termsError").innerHTML = "Terms checkbox must be checked";
                valid = false;
            }

            if (!valid) return;

            /* ===== STORE DATA & REDIRECT ===== */
            localStorage.setItem("name", name);
            localStorage.setItem("email", email);
            localStorage.setItem("gender", gender.value);
            localStorage.setItem("course", course);

            window.location.href = "newUserData.html";
        });
    </script>

</body>

</html>